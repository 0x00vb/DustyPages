<!DOCTYPE html>
<html lang="en" manifest="bookReader.appcache">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>RustyPages - Offline Book Reader</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/themes.css">
</head>
<body class="theme-light">
    <div id="app">
        <header id="app-header">
            <h1>RustyPages</h1>
            <div id="nav-buttons" class="hidden">
                <button id="back-to-library">Library</button>
                <button id="toggle-settings">Settings</button>
            </div>
            <div id="user-status">
                <span id="sync-status"></span>
                <span id="user-info"></span>
                <button id="login-button" class="small-btn">Login</button>
            </div>
        </header>

        <main>
            <!-- Login/Register View -->
            <div id="auth-view" class="hidden">
                <div class="auth-container">
                    <h2 id="auth-title">Login</h2>
                    <div class="form-group">
                        <label for="username">Username</label>
                        <input type="text" id="username" placeholder="Enter username">
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" placeholder="Enter password">
                    </div>
                    <div class="auth-buttons">
                        <button id="auth-submit">Login</button>
                        <button id="auth-toggle">Need an account? Register</button>
                    </div>
                    <div id="auth-error" class="error-message"></div>
                    <button id="close-auth">Cancel</button>
                </div>
            </div>

            <!-- Library View -->
            <div id="library-view">
                <div class="add-book-container">
                    <label for="book-file" class="upload-btn">Add Book</label>
                    <input type="file" id="book-file" accept=".epub,.pdf" style="display:none;">
                </div>
                <div id="book-list">
                    <p id="no-books-message">No books added yet. Click "Add Book" to upload your first book.</p>
                    <!-- Books will be added here dynamically -->
                </div>
            </div>

            <!-- Reader View -->
            <div id="reader-view" class="hidden">
                <div id="book-title"></div>
                <div id="reader-container"></div>
                
                <!-- Progress Slider -->
                <div id="progress-container">
                    <input type="range" id="progress-slider" min="0" max="100" value="0">
                    <div id="progress-labels">
                        <span id="progress-start">Start</span>
                        <span id="progress-percent">0%</span>
                        <span id="progress-end">End</span>
                    </div>
                </div>
                
                <div id="pagination">
                    <button id="prev-page">Previous</button>
                    <span id="page-info">Page <span id="current-page">0</span> of <span id="total-pages">0</span></span>
                    <button id="next-page">Next</button>
                </div>
            </div>

            <!-- Settings Panel -->
            <div id="settings-panel" class="hidden">
                <h2>Settings</h2>
                <div class="settings-section">
                    <h3>Theme</h3>
                    <div class="theme-selector">
                        <button class="theme-btn" data-theme="light">Light</button>
                        <button class="theme-btn" data-theme="sepia">Sepia</button>
                        <button class="theme-btn" data-theme="dark">Dark</button>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Font</h3>
                    <div class="font-selector">
                        <button class="font-btn" data-font="serif">Serif</button>
                        <button class="font-btn" data-font="sans-serif">Sans-serif</button>
                        <button class="font-btn" data-font="dyslexic">Dyslexic</button>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Font Size</h3>
                    <div class="font-size-selector">
                        <button class="font-size-btn" data-size="small">Small</button>
                        <button class="font-size-btn" data-size="medium">Medium</button>
                        <button class="font-size-btn" data-size="large">Large</button>
                        <button class="font-size-btn" data-size="xlarge">Extra Large</button>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Margins</h3>
                    <div class="margin-selector">
                        <button class="margin-btn" data-margin="small">Small</button>
                        <button class="margin-btn" data-margin="medium">Medium</button>
                        <button class="margin-btn" data-margin="large">Large</button>
                    </div>
                </div>
                <button id="close-settings">Close</button>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <script src="js/polyfills.js"></script>
    <script src="js/compatibility.js"></script>
    <script src="js/lib/jszip.min.js"></script>
    <script src="js/lib/epub.min.js"></script>
    <script src="js/lib/pdf.min.js"></script>
    <script src="js/lib-config.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/users.js"></script>
    <script src="js/epubHandler.js"></script>
    <script src="js/pdfHandler.js"></script>
    <script src="js/reader.js"></script>
    <script src="js/app.js"></script>
</body>
</html> 